{% extends "admins/dashbord.html" %}
{% load static %}

{% block show %}
<div class="container mt-4">
  <!-- Page Title and Breadcrumb -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h3 class="fw-bold mb-1">
        <i class="bi bi-box-seam me-2 text-primary"></i>Add Product
      </h3>
      <nav>
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item">
            <a href="/admins/dashbord/" class="text-decoration-none">
              <i class="bi bi-house-door me-1"></i>Product Management
            </a>
          </li>
          <li class="breadcrumb-item active">
            <i class="bi bi-plus-circle me-1"></i>Add Product
          </li>
        </ol>
      </nav>
    </div>
  </div>

  <!-- Alert Message (SAME LOGIC) -->
  {% if message %}
  <div class="alert alert-danger alert-dismissible fade show shadow-sm mb-4" role="alert">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>
    <strong>{{ message }}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endif %}

  <!-- Modern Product Form Card -->
  <div class="row justify-content-center">
    <div class="col-xl-8 col-lg-10">
      <div class="card shadow-lg border-0 overflow-hidden">
        <div class="card-header bg-gradient-primary text-white p-4">
          <h4 class="mb-0 fw-bold">
            <i class="bi bi-plus-square-fill me-2"></i>New Product Details
          </h4>
        </div>
        
        <div class="card-body p-5">
          <!-- SAME FORM FIELDS - Modern Styling -->
          <form class="row g-4 needs-validation" method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            <!-- Product Name -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-tag me-2 text-primary"></i>Name <span class="text-danger">*</span>
              </label>
              <input type="text" name="name" class="form-control form-control-lg shadow-sm" 
                     placeholder="Product name (e.g., iPhone 15 Pro)" required>
            </div>

            <!-- Price -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-currency-rupee me-2 text-success"></i>Price <span class="text-danger">*</span>
              </label>
              <div class="input-group">
                <span class="input-group-text bg-light">â‚¹</span>
                <input type="number" name="price" class="form-control form-control-lg shadow-sm" 
                       placeholder="999" step="0.01" min="0" required>
              </div>
            </div>

            <!-- Company Dropdown (SAME LOGIC) -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-building me-2 text-info"></i>Company <span class="text-danger">*</span>
              </label>
              <select class="form-select form-select-lg shadow-sm" name="company" required>
                <option selected disabled>Select company</option>
                {% for cp in comp %}
                <option value="{{ cp.id }}">
                  {{ cp.name }} <span class="text-muted">({{ cp.category }})</span>
                </option>
                {% endfor %}
              </select>
            </div>

            <!-- Category Dropdown (Add if needed) -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-tags me-2 text-warning"></i>Category
              </label>
              <select class="form-select form-select-lg shadow-sm" name="category">
                <option selected disabled>Select category</option>
                <option value="Electronics">Electronics</option>
                <option value="Clothing">Clothing</option>
                <option value="Home">Home & Garden</option>
                <option value="Sports">Sports</option>
                <option value="Books">Books</option>
              </select>
            </div>

            <!-- Product Image -->
            <div class="col-12">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-image me-2 text-info"></i>Product Image
              </label>
              <div class="input-group">
                <input class="form-control form-control-lg shadow-sm" type="file" name="image" accept="image/*">
                <span class="input-group-text bg-light">
                  <i class="bi bi-cloud-upload"></i>
                </span>
              </div>
              <div class="form-text">JPG, PNG, WebP (Max 5MB)</div>
            </div>

            <!-- Quantity -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-archive me-2 text-success"></i>Quantity <span class="text-danger">*</span>
              </label>
              <input type="number" name="quantity" class="form-control form-control-lg shadow-sm" 
                     placeholder="100" min="0" required>
            </div>

            <!-- Description -->
            <div class="col-lg-6">
              <label class="form-label fw-semibold mb-2">
                <i class="bi bi-card-text me-2 text-secondary"></i>Description
              </label>
              <textarea class="form-control shadow-sm" name="des" rows="4" 
                        placeholder="Enter product description..."></textarea>
            </div>

            <!-- Submit Button -->
            <div class="col-12">
              <button class="btn btn-primary btn-lg w-100 shadow-lg px-5 py-3" type="submit">
                <i class="bi bi-check-lg me-2"></i>Add Product Now
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* Modern GUI Only - Backend Untouched */
.bg-gradient-primary {
  background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%) !important;
}
.card { border-radius: 20px !important; }
.form-control, .form-select, .form-control-lg {
  border-radius: 12px;
  border: 2px solid #e9ecef;
  padding: 14px 18px;
  transition: all 0.3s ease;
  font-size: 1rem;
}
.form-control:focus, .form-select:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 0.25rem rgba(13,110,253,0.15);
  transform: translateY(-1px);
}
.btn-primary {
  background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%);
  border: none;
  border-radius: 12px;
  font-weight: 600;
  padding: 16px 32px;
}
.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 35px rgba(13,110,253,0.4);
}
.input-group-text {
  border-radius: 12px 0 0 12px;
  border: 2px solid #e9ecef;
}
.breadcrumb-item a { color: #6c757d; }
.breadcrumb-item.active { color: #0d6efd; font-weight: 500; }
</style>

<script>
// Client-side validation (optional enhancement)
document.addEventListener('DOMContentLoaded', function() {
  const forms = document.querySelectorAll('.needs-validation');
  Array.prototype.slice.call(forms).forEach(function(form) {
    form.addEventListener('submit', function(event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
});
</script>
{% endblock show %}
